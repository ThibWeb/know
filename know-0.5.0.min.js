/**
 * know.js — v0.5.0
 * ---------------------------------------------------------------------
 * A simple tool to log stuff inside the console and beyond.
 * © 2013 @thibaud_colas Released under the MIT and GPL Licenses.
 */
(function(d,e){"function"===typeof define?define(["$"],d):d(e)})(function(d){window.know={};window.know=new function(){var e=window.console,a=this;a.name="know.js";a.version="v0.5.0";a.sep="|";a.base="know";a.key=null;a.token=null;a.id=null;a.storage=window.sessionStorage;a.popup={id:"know-popup",title:a.name+" "+a.version+" \u2014 know.show() :",css:{border:"1px solid DarkSlateGray",outline:"1px dashed LightSteelBlue",position:"absolute","z-index":"1001",top:"25%",right:"1%","max-height":"50%","max-width":"30%", padding:"5px",overflow:"scroll"}};a.gist={url:"https://api.github.com/gists",confirm:"Upload logs to gist.github.com ?",description:"Log file generated w/ "+a.name+" "+a.version,"public":!1,ext:".json"};a.level={info:"info",warn:"warn",error:"error"};a.usage={title:a.name+" "+a.version+" \u2014 know.help() :",first:"- first define a key w/ know.init(key, store?)",secund:"- then log to console w/ know.{info,warn,error}(message)",third:"- your logs are stored w/ (store? local : session) + Storage", fourth:"- view your logs w/ know.show() - close.on(mouseleave)",fifth:"- share your logs w/ know.share() as GitHub gists",sixth:"- bookmarklet: javascript:{know.show();};void(0);"};a.stamp=function(){var a=new Date,c=a.getMinutes(),c=10>c?"0"+c:c,a=a.getSeconds();return c+":"+(10>a?"0"+a:a)};a.store=function(b){var c=a.storage.getItem(a.name),c=c?d.parseJSON(c):{},f=c[a.id]||[];f.push(a.stamp()+a.sep+b);c[a.id]=f;a.storage.setItem(a.name,JSON.stringify(c))};a.log=function(b,c){var d=a.key+a.sep+b+ a.sep+c;e[b](d);a.store(d)};d.extend(a,{help:function(){d.each(a.usage,function(a,c){e.log(c)})},init:function(b,c){a.key=b||a.base;a.token=Date.now();a.id=a.base+"."+a.key;a.storage=c?window.localStorage:window.sessionStorage}});d.extend(a,{info:function(b){a.log(a.level.info,b)},warn:function(b){a.log(a.level.warn,b)},error:function(b){a.log(a.level.error,b)},dir:function(b){a.log(a.level.info,b.name+": "+b);e.dir(b)},dump:function(b){a.log(a.level.info,"dump w/ $"+d.fn.jquery);var c;d.each(b,function(b, d){c="function"==typeof d?"function":d;e.log(" "+b+": "+c);a.store(" "+b+": "+c)})}});d.extend(a,{reset:function(){a.storage.removeItem(a.name);a.storage.setItem(a.name,JSON.stringify({}))},clear:function(){var b=a.storage.getItem(a.name),b=d.parseJSON(b);b.hasOwnProperty(a.id)&&(b[a.id]=[],a.storage.setItem(a.name,JSON.stringify(b)))}});d.extend(a,{show:function(){var b=d('<div id="'+a.popup.id+'">');b.css(a.popup.css);var c="<h6>"+a.popup.title+"</h6>",f=a.storage.getItem(a.name),f=f?d.parseJSON(f): {},e='<ul style="list-style-type: none;">';d.each(f,function(a,b){for(var c=0;c<b.length;c++)e+="<li><code>"+b[c]+"</code></li>"});e+="</ul>";b.html(c+e);d(document.body).append(b);b.mouseleave(function(){d(this).fadeOut(100)})},share:function(){var b=window.confirm(a.gist.confirm),c=a.storage.getItem(a.name);b&&c&&(b={"public":a.gist["public"],description:a.gist.description,files:{}},b.files[a.id+a.gist.ext]={content:c},d.ajax({type:"POST",dataType:"json",url:a.gist.url,data:JSON.stringify(b),success:function(b){a.log(a.level.info, "upload to "+('<a href="'+b.html_url+'">'+b.html_url+"</a>"));window.alert(b.html_url)}}))}})}},jQuery);
